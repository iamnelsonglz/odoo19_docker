<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
        <!-- Action -->
        <record id="odoo_cfdi_issued_action" model="ir.actions.act_window">
            <field name="name">CFDI Issued</field>
            <field name="res_model">odoo.cfdi.issued</field>
            <field name="help" type="html">
                <p class="o_view_nocontent_smiling_face">
                    This model is used for managing CFDI issued.
                </p>
            </field>
            <field name="view_mode">list,form</field>
        </record>

        <!-- Menu -->
        <menuitem id="odoo_cfdi_issued_submenu"
            name="CFDI Issued"
            parent="cfdi_management_menu" 
            sequence="101"
            action="odoo_cfdi_issued_action"
        />

        <!-- Search view -->
        <record id="odoo_cfdi_issued_search_view" model="ir.ui.view">
            <field name="name">odoo.cfdi.issued.search</field>
            <field name="model">odoo.cfdi.issued</field>
            <field name="arch" type="xml">
                <search>
                    <field name="fiscal_folio"/>
                    <field name="rfc_emitter"/>
                    <field name="rfc_receiver"/>
                    <field name="status"/>
                </search>
            </field>
        </record>

        <!-- List View -->
        <record id="odoo_cfdi_issued_list_view" model="ir.ui.view">
            <field name="name">odoo.cfdi.issued.list</field>
            <field name="model">odoo.cfdi.issued</field>
            <field name="arch" type="xml">
                <list duplicate="false" import="false">
                    <field name="fiscal_folio"/>
                    <field name="rfc_emitter"/>
                    <field name="rfc_receiver"/>
                    <field name="status"/>
                    <field name="description"/>
                </list>
            </field>
        </record>

        <!-- Form View -->
        <record id="odoo_cfdi_issued_form_view" model="ir.ui.view">
            <field name="name">odoo.cfdi.issued.form</field>
            <field name="model">odoo.cfdi.issued</field>
            <field name="arch" type="xml">
                <form duplicate="false" import="false">
                    <header>
                        <field name="status" widget="statusbar"/>
                    </header>
                    <sheet>
                        <widget name="web_ribbon" title="Cancelled" bg_color="bg-danger"/>
                        <widget name="web_ribbon" title="Paid" bg_color="bg-success" />
                        <div class="alert alert-info alert-dismissible fade show" role="status">
                            Upload the .xml file of a CFDI to automatically fill in the fields.
                            <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                        </div>
                        <h4 class="o_form_label o_field_widget o_readonly_modifier o_required_modifier">
                            Folio
                        </h4>
                        <h1 class="mt0">
                            <field name="fiscal_folio" force_save="True"/>
                        </h1>
                        <group>
                            <field name="xml_filename" invisible="1"/>
                            <field name="xml_file" filename="xml_filename"/>
                            <group>
                                <field name="rfc_emitter"/>
                                <field name="name_emitter"/>
                                <field name="zip_code_emitter"/>
                                <field name="fiscal_regime_emitter"/>
                                <field name="description"/>
                            </group>
                            <group>
                                <field name="rfc_receiver"/>
                                <field name="name_receiver"/>
                                <field name="zip_code_receiver"/>
                                <field name="fiscal_regime_receiver"/>
                                <field name="cfdi_concept"/>
                                <field name="receipt_effect"/>
                                <field name="total" widget="monetary" options="{'currency_field': 'currency_id'}"/>
                                <field name="date_period_type" widget="radio"/>
                                
                                <field name="start_date" string='Date' />
                                <field name="start_date"/>
                                <field name="end_date"/>
                            </group>
                        </group>
                    </sheet>
                    <chatter reload_on_follower="True"/>
                </form>
            </field>
        </record>
    </data>
</odoo>